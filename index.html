<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Documentation - Bordeaux-Threads</title>
<meta name=description content="Common Lisp threading library"><meta name=generator content="Hugo 0.124.1"><link href=https://sionescu.github.io/bordeaux-threads//index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://sionescu.github.io/bordeaux-threads/><link rel=stylesheet href=https://sionescu.github.io/bordeaux-threads/css/theme.min.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script><link rel=stylesheet href=https://sionescu.github.io/bordeaux-threads/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script><script src=https://sionescu.github.io/bordeaux-threads/js/bundle.js></script><style>:root{}</style><meta property="og:title" content="Documentation"><meta property="og:description" content="Common Lisp threading library"><meta property="og:type" content="website"><meta property="og:url" content="https://sionescu.github.io/bordeaux-threads/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Documentation"><meta name=twitter:description content="Common Lisp threading library"><meta itemprop=name content="Documentation"><meta itemprop=description content="Common Lisp threading library"></head><body><div class=container><header><h1>Bordeaux-Threads</h1><span class=version>Version 0.8.8</span>
<a href=https://github.com/sionescu/bordeaux-threads class=github><i class="fab fa-github"></i></a><p class=description>Common Lisp threading library</p></header><div class=global-menu><nav><ul><li><a href=/bordeaux-threads/>Home</a></li></ul></nav></div><div class=content-container><main><h2 id=raison-dêtre>Raison d&rsquo;être</h2><p>Bordeaux-Threads is a minimal library that aims to provide the basic
concepts required for multi-threading programming, such as threads,
mutexes, semaphores and condition variables. Higher-level data
structures such as queues, mailboxes, thread pools, execution graphs,
etc&mldr; tend to be more specialized and are better left to other
libraries.</p><p>This document describes the second version of the API (APIv2), which
differs from the first version in a few key points and aims to provide
a more uniformous interface across all Common Lisp implementations.</p><h2 id=migration-from-apiv1-to-apiv2>Migration from APIv1 to APIv2</h2><p>APIv2 is mostly compatible with v1, and in most cases it should
suffice to replace all references to package <code>bordeaux-threads</code> (or
<code>bt</code>) with <code>bordeaux-threads-2</code> (or <code>bt2</code>).</p><p>For more details, there&rsquo;s a <a href=https://blog.cddr.org/posts/2023-05-27-bordeaux-threads-apiv2/>blog
post</a>.</p><h2 id=host-support>Host support</h2><p>When Bordeaux-Threads was created, most Common Lisp implementations
were either single-threaded or provided user-space scheduling akin to
green threads, and therefore Bordeaux-Threads tried to support all
such implementations as well as possible.</p><p>Bordeaux-Threads APIV2 no longer supports single-threaded
implementations and was conceived to work best with hosts that provide
SMP threads.</p><p>In most cases Bordeaux-Threads simply wraps the primitives provided by
the host implementation. Whenever the primitives are absent from the
host, we try to provide an ersatz implementation that is optimized for
correctness and readability rather than performance.</p><p>The two absolutely necessary primitives are <strong>threads</strong> and
<strong>locks</strong>. <strong>Semaphores</strong> and <strong>condition variables</strong> can be
implemented in terms of one another, and that&rsquo;s the case on a few
implementations. <strong>Atomic operations</strong> vary greatly in what kind of
forms they operate on so we do not expose them, instead providing
slightly higher-level constructs.</p><nav class=pagination><a class="nav nav-next" href=https://sionescu.github.io/bordeaux-threads/threads/ title="Threads dictionary">Next - Threads dictionary <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><div class=edit-meta>Last updated on 2022-01-07<br>Published on 2022-01-07<br><a href=https://github.com/sionescu/bordeaux-threads/edit/master/content/_index.md class=edit-page><i class="fas fa-pen-square"></i> Edit on GitHub</a></div><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=slide-menu><ul><li class=active><a href=https://sionescu.github.io/bordeaux-threads/>Home</a></li><li class=has-sub-menu><a href=https://sionescu.github.io/bordeaux-threads/threads/>Threads dictionary<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://sionescu.github.io/bordeaux-threads/threads/class-thread/>Class THREAD</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/thread-readers/>Function THREAD-NAME, THREAD-NATIVE-THREAD</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/threadp/>Function: THREADP</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/make-thread/>Function: MAKE-THREAD</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/default-special-bindings/>Variable *DEFAULT-SPECIAL-BINDINGS*</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/current-all-threads/>Function CURRENT-THREAD, ALL-THREADS</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/join-thread/>Function JOIN-THREAD</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/thread-yield/>Function THREAD-YIELD</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/start-multiprocessing/>Function START-MULTIPROCESSING</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/interrupt-thread/>Function INTERRUPT-THREAD</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/signal-in-thread/>Function SIGNAL-IN-THREAD, WARN-IN-THREAD, ERROR-IN-THREAD</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/destroy-thread/>Function DESTROY-THREAD</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/thread-alive-p/>Function THREAD-ALIVE-P</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/bordeaux-thread-error/>Condition type BORDEAUX-THREADS-ERROR</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/abnormal-exit/>Condition type ABNORMAL-EXIT</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/threads/abnormal-exit-condition/>Function ABNORMAL-EXIT-CONDITION</a></li></ul></li><li class=has-sub-menu><a href=https://sionescu.github.io/bordeaux-threads/locks/>Locks dictionary<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://sionescu.github.io/bordeaux-threads/locks/lock/>Class LOCK</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/lockp/>Function LOCKP</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/recursive-lock/>Class RECURSIVE-LOCK</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/recursive-lock-p/>Function RECURSIVE-LOCK-P</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/lock-readers/>Function LOCK-NAME, LOCK-NATIVE-LOCK</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/native-lock/>Host type NATIVE-LOCK</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/native-lock-p/>Function NATIVE-LOCK-P</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/native-recursive-lock/>Host type NATIVE-RECURSIVE-LOCK</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/native-recursive-lock-p/>Function NATIVE-RECURSIVE-LOCK-P</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/make-lock/>Function MAKE-LOCK</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/acquire-release-lock/>Function ACQUIRE-LOCK, RELEASE-LOCK</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/with-lock-held/>Macro WITH-LOCK-HELD</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/make-recursive-lock/>Function MAKE-RECURSIVE-LOCK</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/acquire-release-recursive-lock/>Function ACQUIRE-RECURSIVE-LOCK, RELEASE-RECURSIVE-LOCK</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/locks/with-recursive-lock-held/>Macro WITH-RECURSIVE-LOCK-HELD</a></li></ul></li><li class=has-sub-menu><a href=https://sionescu.github.io/bordeaux-threads/condition-variables/>Condition Variables dictionary<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://sionescu.github.io/bordeaux-threads/condition-variables/condition-variable/>Class CONDITION-VARIABLE</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/condition-variables/condition-variable-p/>Function CONDITION-VARIABLE-P</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/condition-variables/make-condition-variable/>Function MAKE-CONDITION-VARIABLE</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/condition-variables/condition-wait/>Function CONDITION-WAIT</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/condition-variables/condition-notify/>Function CONDITION-NOTIFY</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/condition-variables/condition-broadcast/>Function CONDITION-BROADCAST</a></li></ul></li><li class=has-sub-menu><a href=https://sionescu.github.io/bordeaux-threads/semaphores/>Semaphores dictionary<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://sionescu.github.io/bordeaux-threads/semaphores/semaphore/>Class SEMAPHORE</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/semaphores/semaphorep/>Function SEMAPHOREP</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/semaphores/make-semaphore/>Function MAKE-SEMAPHORE</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/semaphores/signal-semaphore/>Function SIGNAL-SEMAPHORE</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/semaphores/wait-on-semaphore/>Function WAIT-ON-SEMAPHORE</a></li></ul></li><li class=has-sub-menu><a href=https://sionescu.github.io/bordeaux-threads/atomics/>Atomics dictionary<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://sionescu.github.io/bordeaux-threads/atomics/atomic-integer/>Class ATOMIC-INTEGER</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/atomics/atomic-integer-p/>Function ATOMIC-INTEGER-P</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/atomics/make-atomic-integer/>Function MAKE-ATOMIC-INTEGER</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/atomics/atomic-integer-compare-and-swap/>Function ATOMIC-INTEGER-COMPARE-AND-SWAP</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/atomics/atomic-integer-decf/>Function ATOMIC-INTEGER-DECF</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/atomics/atomic-integer-incf/>Function ATOMIC-INTEGER-INCF</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/atomics/atomic-integer-value/>Function ATOMIC-INTEGER-VALUE</a></li></ul></li><li class=has-sub-menu><a href=https://sionescu.github.io/bordeaux-threads/timeouts/>Timeouts dictionary<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://sionescu.github.io/bordeaux-threads/timeouts/timeout/>Class TIMEOUT</a></li><li><a href=https://sionescu.github.io/bordeaux-threads/timeouts/with-timeout/>Macro WITH-TIMEOUT</a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>